# 의원 상세 화면 분석

## 화면 구성 요소별 데이터 요구사항 분석

### 1. 상단 헤더
**표시 내용**: "의원 프로필 상세"
**필요 데이터**: 없음 (정적 텍스트)
**구현 가능성**: ✅ 구현 가능

---

### 2. 의원 프로필 카드

#### 2.1 의원 사진
**표시 내용**: 의원 사진 이미지

**필요 데이터**:
- 사진 URL: `assembly_members.photo_url`

**API 제공 여부**:
- ✅ 의원정보 API (`NAAS_PIC`)

**DB 필드**: 
- `assembly_members.photo_url` (VARCHAR)

**구현 가능성**: ✅ 구현 가능

#### 2.2 의원 이름
**표시 내용**: "이수진"

**필요 데이터**:
- 의원명: `assembly_members.name`

**API 제공 여부**:
- ✅ 의원정보 API (`NAAS_NM`)

**구현 가능성**: ✅ 구현 가능

#### 2.3 정당명
**표시 내용**: "더불어민주당" (정당 로고 포함)

**필요 데이터**:
- 정당명: `assembly_members.party`

**API 제공 여부**:
- ✅ 의원정보 API (`PLPT_NM`)

**구현 가능성**: ✅ 구현 가능

---

### 3. 기본정보 섹션

#### 3.1 선거구
**표시 내용**: "서울 중구성동구갑"

**필요 데이터**:
- 선거구: `assembly_members.district`

**API 제공 여부**:
- ✅ 의원정보 API (`ELECD_NM`)

**구현 가능성**: ✅ 구현 가능

#### 3.2 소속위원회
**표시 내용**: "법제사법위원회"

**필요 데이터**:
- 소속위원회: `assembly_members.committee`

**API 제공 여부**:
- ✅ 의원정보 API (`BLNG_CMIT_NM`)
- ⚠️ 여러 위원회를 `/`로 구분하여 제공

**구현 가능성**: ✅ 구현 가능 (첫 번째 위원회만 표시 또는 모두 표시)

#### 3.3 당선횟수
**표시 내용**: "3선(제18대, 제20대, 제22대)"

**필요 데이터**:
- 당선 대수: `assembly_members.era`

**API 제공 여부**:
- ✅ 의원정보 API (`GTELT_ERACO`)
- 형식: "제9대, 제10대" (여러 대수를 `,`로 구분)

**구현 가능성**: ✅ 구현 가능 (파싱 필요)

#### 3.4 임기 정보
**표시 내용**: 
- "2024. 05. 30 ~" / "제22대 국회의원"
- "2016. 05. 30 ~ 2020.05.29" / "제20대 국회의원"
- "2008. 05. 30 ~ 2012.05.29" / "제18대 국회의원"

**필요 데이터**:
- 당선 대수: `assembly_members.era`
- 임기 시작일/종료일: 별도 계산 필요

**API 제공 여부**:
- ✅ 당선 대수: 의원정보 API (`GTELT_ERACO`)
- ⚠️ 임기 일정: 별도 계산 또는 크롤링 필요

**구현 가능성**: ⚠️ 부분 구현 가능
- 당선 대수 표시: ✅ 가능
- 정확한 임기 일정: 국회 임기 규칙에 따라 계산 필요

---

### 4. 상세정보 섹션

#### 4.1 전화번호
**표시 내용**: "02-1234-5678"

**필요 데이터**:
- 전화번호: `assembly_members.phone`

**API 제공 여부**:
- ⚠️ 의원정보 API (`NAAS_TEL_NO`) - 일부만 제공 (대부분 NULL)

**구현 가능성**: ⚠️ 부분 구현 가능 (데이터가 있는 경우만 표시)

#### 4.2 사무실 호실
**표시 내용**: "의원회관 743호"

**필요 데이터**:
- 사무실 호실: `assembly_members.office_room`

**API 제공 여부**:
- ⚠️ 의원정보 API (`OFFM_RNUM_NO`) - 일부만 제공 (대부분 NULL)

**구현 가능성**: ⚠️ 부분 구현 가능 (데이터가 있는 경우만 표시)

#### 4.3 홈페이지
**표시 내용**: "바로가기" (링크)

**필요 데이터**:
- 홈페이지 URL: `assembly_members.homepage_url`

**API 제공 여부**:
- ⚠️ 의원정보 API (`NAAS_HP_URL`) - 일부만 제공 (대부분 NULL)

**구현 가능성**: ⚠️ 부분 구현 가능 (데이터가 있는 경우만 표시)

#### 4.4 이메일
**표시 내용**: "sotong0743@gmail.com" (링크)

**필요 데이터**:
- 이메일: `assembly_members.email`

**API 제공 여부**:
- ⚠️ 의원정보 API (`NAAS_EMAIL_ADDR`) - 일부만 제공 (대부분 NULL)

**구현 가능성**: ⚠️ 부분 구현 가능 (데이터가 있는 경우만 표시)

#### 4.5 의원실 안내
**표시 내용**: "-"

**필요 데이터**:
- 의원실 안내 정보

**API 제공 여부**:
- ❌ API에서 제공하지 않음

**구현 가능성**: ❌ 구현 불가능 (또는 "-" 표시)

#### 4.6 보좌관
**표시 내용**: "김흥수, 이인화"

**필요 데이터**:
- 보좌관명: `assembly_members.aide_name`

**API 제공 여부**:
- ⚠️ 의원정보 API (`AIDE_NM`) - 일부만 제공 (대부분 NULL)

**구현 가능성**: ⚠️ 부분 구현 가능 (데이터가 있는 경우만 표시)

#### 4.7 선임비서관
**표시 내용**: "문현수, 안주연"

**필요 데이터**:
- 선임비서관명: `assembly_members.secretary_name`

**API 제공 여부**:
- ⚠️ 의원정보 API (`CHF_SCRT_NM`) - 일부만 제공 (대부분 NULL)

**구현 가능성**: ⚠️ 부분 구현 가능 (데이터가 있는 경우만 표시)

#### 4.8 비서관
**표시 내용**: "전성하, 장정인, 도형우, 임주현, 김인환"

**필요 데이터**:
- 비서관명: `assembly_members.assistant_name`

**API 제공 여부**:
- ⚠️ 의원정보 API (`SCRT_NM`) - 일부만 제공 (대부분 NULL)

**구현 가능성**: ⚠️ 부분 구현 가능 (데이터가 있는 경우만 표시)

---

### 5. 관심 분야 섹션

#### 5.1 관심 분야 워드클라우드
**표시 내용**: 부동산, 의료, 노동, 아동 등 (워드클라우드 형태)

**필요 데이터**:
- 의원의 관심 분야: 의원이 표결한 의안의 카테고리 분석

**API 제공 여부**:
- ⚠️ 자체 계산 필요
  - 표결정보 API로 의원의 표결 이력 조회
  - 각 의안의 카테고리 조회
  - 카테고리별 빈도 계산

**구현 가능성**: ⚠️ 부분 구현 가능
- 표결 이력 기반 카테고리 분석: ✅ 가능
- 워드클라우드 시각화: ✅ 가능

#### 5.2 관심사 일치율
**표시 내용**: "내 관심사랑 97% 일치해요"

**필요 데이터**:
- 사용자 관심사: 사용자 정치성향 테스트 결과
- 의원 관심사: 표결 이력 기반 카테고리 분석
- 일치율 계산: 두 관심사 비교

**API 제공 여부**:
- ❌ 자체 구현 필요

**구현 가능성**: ❌ 추후 구현 (사용자 정치성향 테스트 필요)

---

### 6. 대표 발의 의안 섹션

#### 6.1 섹션 제목
**표시 내용**: "대표 발의 의안"

**필요 데이터**: 없음 (정적 텍스트)
**구현 가능성**: ✅ 구현 가능

#### 6.2 의안 목록
**표시 내용**: 의안 카드 (제목, 요약, 카테고리)

**필요 데이터**:
- 의원이 대표 발의한 의안 목록
- 의안 제목: `bills.title`
- 의안 요약: `bills.summary`
- 의안 카테고리: `bills.categories`

**API 제공 여부**:
- ✅ 의안정보 API (`PPSR_NM`으로 필터링)

**DB 쿼리**:
```sql
SELECT * FROM bills 
WHERE proposer_name = '이수진'
ORDER BY proposal_date DESC
LIMIT 10
```

**구현 가능성**: ✅ 구현 가능

---

## 데이터 연결 및 테이블 설계

### 의원 상세 화면 데이터 흐름

```
assembly_members (의원 기본 정보)
├── member_id (PK)
├── name, party, district, committee
├── photo_url, phone, email, homepage_url
├── office_room, aide_name, secretary_name
└── era (당선 대수)

votes (표결 이력) → 관심 분야 분석
├── member_id (FK)
├── bill_id (FK)
└── vote_result

bills (의안) → 대표 발의 의안
├── bill_id (PK)
├── proposer_name (필터링)
└── title, summary, categories
```

---

## 구현 가능성 종합

### ✅ 즉시 구현 가능
1. 의원 기본 정보 (사진, 이름, 정당)
2. 선거구, 소속위원회
3. 당선횟수 (파싱 필요)
4. 대표 발의 의안 목록
5. 관심 분야 분석 (표결 이력 기반)

### ⚠️ 부분 구현 가능
1. 연락처 정보 (전화번호, 이메일, 홈페이지) - 일부만 제공
2. 보좌관/비서관 정보 - 일부만 제공
3. 임기 일정 - 계산 필요
4. 관심 분야 워드클라우드 - 표결 이력 분석 필요

### ❌ 추후 구현 필요
1. 관심사 일치율 - 사용자 정치성향 테스트 필요

---

## 추가 필요 테이블

### member_interests (의원 관심 분야) - 계산 결과 저장
```sql
CREATE TABLE member_interests (
    member_id VARCHAR(50) NOT NULL,
    category VARCHAR(50) NOT NULL,
    interest_score INT NOT NULL COMMENT '해당 카테고리 의안 표결 빈도',
    PRIMARY KEY (member_id, category),
    FOREIGN KEY (member_id) REFERENCES assembly_members(member_id),
    INDEX idx_member_id (member_id),
    INDEX idx_category (category)
) COMMENT='의원 관심 분야 (표결 이력 기반)';
```

---

## 다음 단계

1. **즉시 구현 가능한 기능부터 개발**
   - 의원 기본 정보 표시
   - 대표 발의 의안 목록
   - 관심 분야 분석 (표결 이력 기반)

2. **데이터 부족 대응**
   - 연락처 정보가 없는 경우 "-" 표시
   - 보좌관/비서관 정보가 없는 경우 "-" 표시

3. **추후 구현 기능**
   - 사용자 정치성향 테스트
   - 관심사 일치율 계산

