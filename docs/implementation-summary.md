# 구현 가능성 검토 및 DB 설계 종합 문서

> 기획자/디자이너 공유용 문서

## 📋 개요

정부에서 제공하는 3개의 API를 검토하고, Figma에 정의된 기능들의 구현 가능성을 확인한 결과를 정리한 문서입니다.

## ✅ 구현 가능한 기능

### 1. 의안 목록 조회
- **제공 API**: 의안정보 통합 API
- **제공 데이터**: 의안 제목, 제안일, 진행단계, 소관위원회
- **추가 작업**: AI 카테고리 분류 (이미 구현됨)
- **구현 난이도**: ⭐⭐ (쉬움)

### 2. 의안 상세 정보
- **제공 API**: 의안정보 통합 API
- **제공 데이터**: 의안 전체 정보, 제안자, 일정, 상세 링크
- **구현 난이도**: ⭐⭐ (쉬움)

### 3. 의안 요약 및 카테고리 분류
- **제공 API**: 의안정보 통합 API + Gemini API
- **제공 데이터**: 의안 원문 → AI 요약 및 카테고리 분류
- **현재 상태**: ✅ 이미 구현됨 (`AI/20251008_Gemini/bill_headline_summarizer.py`)
- **구현 난이도**: ⭐ (완료)

### 4. 표결 현황 조회
- **제공 API**: 국회의원 본회의 표결정보 API
- **제공 데이터**: 의안별 표결 결과, 국회의원별 표결 정보 (찬성/반대/기권/불참)
- **구현 난이도**: ⭐⭐⭐ (보통 - 필드 매핑 필요)

### 5. 국회의원 정보 조회
- **제공 API**: 국회의원 정보 통합 API
- **제공 데이터**: 의원 이름, 정당, 선거구, 소속위원회
- **구현 난이도**: ⭐⭐ (쉬움)

### 6. 사용자 투표 기능
- **제공 API**: 없음 (자체 구현)
- **구현 방법**: DB에 `user_votes` 테이블 생성하여 사용자 투표 저장
- **구현 난이도**: ⭐ (쉬움)

## ⚠️ 추가 작업이 필요한 부분

### 1. API 필드명 통일
**문제**: 3개의 API에서 동일한 데이터를 다른 필드명으로 제공
- 예: 의안명 → `BILL_NM` (의안정보 API) vs `BILL_NAME` (표결정보 API)
- 예: 의원 식별자 → `MEMBER_NO` (표결정보 API) vs `NAAS_CD` (의원정보 API)

**해결 방안**: 필드 매핑 로직 구현 (`api_mapper.py`)
- 각 API의 원본 필드명을 통합 DB 필드명으로 매핑
- 자세한 내용: `docs/api-field-mapping.md`

**작업 시간**: 약 2-3일

### 2. 공통 식별자 검증
**확인 필요 사항**:
- `BILL_ID`가 의안정보 API와 표결정보 API에서 동일한 값인지
- `MEMBER_NO`와 `NAAS_CD`가 동일한 식별자인지

**검증 방법**: `scripts/test_api_samples.py` 실행

**작업 시간**: 약 1일

## 📊 데이터베이스 설계

### 주요 테이블
1. **bills** (의안) - 의안정보 통합 API에서 수집
2. **assembly_members** (국회의원) - 의원정보 통합 API에서 수집
3. **votes** (표결) - 표결정보 API에서 수집
4. **user_votes** (사용자 투표) - 자체 구현

### 데이터 수집 순서
1. 의안 정보 수집 → `bills` 테이블
2. 국회의원 정보 수집 → `assembly_members` 테이블
3. 표결 정보 수집 → `votes` 테이블 (의안/의원 정보와 연결)
4. AI 요약 처리 → `bills` 테이블 업데이트

자세한 내용: `docs/db-design.md`, `docs/data-collection-strategy.md`

## 🚀 구현 일정 (예상)

### Phase 1: API 검증 및 매핑 (1주)
- [ ] API 응답 샘플 확인
- [ ] 필드 매핑 검증
- [ ] 매핑 로직 구현

### Phase 2: 데이터 수집 시스템 구축 (2주)
- [ ] 의안 정보 수집 스크립트
- [ ] 의원 정보 수집 스크립트
- [ ] 표결 정보 수집 스크립트
- [ ] 데이터 정합성 검증 로직

### Phase 3: DB 구축 및 통합 (1주)
- [ ] DB 스키마 생성
- [ ] 초기 데이터 수집
- [ ] 데이터 품질 검증

### Phase 4: API 개발 (2-3주)
- [ ] REST API 엔드포인트 개발
- [ ] 프론트엔드 연동

**총 예상 기간**: 6-7주

## 📝 다음 단계

1. **즉시 진행 가능**:
   - [ ] `scripts/test_api_samples.py` 실행하여 API 응답 샘플 확인
   - [ ] 공통 식별자 (BILL_ID, MEMBER_NO/NAAS_CD) 검증

2. **기획/디자인 검토**:
   - [ ] Figma 화면별 데이터 요구사항 최종 확인
   - [ ] 추가로 필요한 데이터가 있는지 확인

3. **개발 시작**:
   - [ ] 필드 매핑 로직 구현
   - [ ] 데이터 수집 스크립트 개발

## 📚 참고 문서

- `docs/api-review.md` - API 상세 검토
- `docs/api-field-mapping.md` - 필드 매핑 상세
- `docs/db-design.md` - DB 설계 상세
- `docs/data-collection-strategy.md` - 데이터 수집 전략

## ❓ 질문 및 확인 사항

1. **Figma 화면별 데이터 요구사항**: 각 화면에 표시되어야 할 정확한 데이터 항목 확인 필요
2. **데이터 업데이트 주기**: 실시간 vs 배치 (일일/주간)
3. **사용자 투표 기능**: 인증 방식 (세션/쿠키 vs 회원가입)
4. **카테고리 분류**: 16개 카테고리로 충분한지 (일자리, 재정, 금융, 교육, 보건, 복지, 주거, 교통, 환경, 에너지, 디지털, 안전, 청년, 여성, 국방, 문화)

---

**작성일**: 2025-01-XX  
**작성자**: 백엔드 개발자  
**검토 필요**: 기획자, 디자이너

