# ë°°í¬ ê°€ì´ë“œ - íŒ€ì› ê³µìœ ìš© ì›¹ ì•± ë°°í¬

**ìƒì„±ì¼**: 2025-11-26

---

## ğŸ¯ ëª©í‘œ

ë¡œì»¬í˜¸ìŠ¤íŠ¸ê°€ ì•„ë‹Œ ì¸í„°ë„·ì„ í†µí•´ íŒ€ì›ë“¤ì´ ì ‘ì†í•  ìˆ˜ ìˆë„ë¡ ì›¹ ì•±ì„ ë°°í¬í•©ë‹ˆë‹¤.
ë°ì´í„°ë² ì´ìŠ¤(PostgreSQL)ë„ í•¨ê»˜ ë°°í¬í•´ì•¼ í•©ë‹ˆë‹¤.

---

## ğŸ“‹ ì¶”ì²œ ë¬´ë£Œ ë°°í¬ í”Œë«í¼

### 1. **Render.com** (ê°€ì¥ ì¶”ì²œ â­)

**ì¥ì :**
- âœ… ë¬´ë£Œ í‹°ì–´ ì œê³µ (ì œí•œì ì´ì§€ë§Œ ì¶©ë¶„)
- âœ… PostgreSQL ë¬´ë£Œ ì œê³µ (90ì¼ ë¬´ë£Œ, ì´í›„ ìœ ë£Œ)
- âœ… GitHub ì—°ë™ìœ¼ë¡œ ìë™ ë°°í¬
- âœ… SSL ì¸ì¦ì„œ ìë™ ì œê³µ (HTTPS)
- âœ… ì„¤ì •ì´ ê°„ë‹¨í•¨
- âœ… í•œêµ­ì–´ ì§€ì› ì—†ì§€ë§Œ ì‚¬ìš©í•˜ê¸° ì‰¬ì›€

**ë‹¨ì :**
- âš ï¸ ë¬´ë£Œ í‹°ì–´ëŠ” 15ë¶„ê°„ ìš”ì²­ì´ ì—†ìœ¼ë©´ ìŠ¬ë¦¬í”„ ëª¨ë“œ (ì²« ìš”ì²­ ì‹œ ëŠë¦¼)
- âš ï¸ PostgreSQL ë¬´ë£ŒëŠ” 90ì¼ í›„ ìœ ë£Œ ì „í™˜ í•„ìš”

**ë¹„ìš©:**
- ì›¹ ì„œë¹„ìŠ¤: ë¬´ë£Œ (ìŠ¬ë¦¬í”„ ëª¨ë“œ)
- PostgreSQL: 90ì¼ ë¬´ë£Œ â†’ ì´í›„ $7/ì›”

**ì¶”ì²œ ì´ìœ :** ê°€ì¥ ê°„ë‹¨í•˜ê³  ì•ˆì •ì ì´ë©°, PostgreSQLì„ ì‰½ê²Œ ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

### 2. **Railway.app** (ë‘ ë²ˆì§¸ ì¶”ì²œ â­)

**ì¥ì :**
- âœ… ë¬´ë£Œ í¬ë ˆë”§ ì œê³µ ($5/ì›” í¬ë ˆë”§)
- âœ… PostgreSQL ì§€ì›
- âœ… GitHub ì—°ë™
- âœ… ìë™ ë°°í¬
- âœ… ìŠ¬ë¦¬í”„ ëª¨ë“œ ì—†ìŒ (ë¬´ë£Œ í¬ë ˆë”§ ì‚¬ìš©)

**ë‹¨ì :**
- âš ï¸ ë¬´ë£Œ í¬ë ˆë”§ì´ ì†Œì§„ë˜ë©´ ìœ ë£Œ ì „í™˜ í•„ìš”
- âš ï¸ ì´ˆê¸° ì„¤ì •ì´ Renderë³´ë‹¤ ì•½ê°„ ë³µì¡

**ë¹„ìš©:**
- ì›¹ ì„œë¹„ìŠ¤: ë¬´ë£Œ í¬ë ˆë”§ ($5/ì›”)
- PostgreSQL: ë¬´ë£Œ í¬ë ˆë”§ í¬í•¨

**ì¶”ì²œ ì´ìœ :** ìŠ¬ë¦¬í”„ ëª¨ë“œê°€ ì—†ì–´ì„œ í•­ìƒ ë¹ ë¥´ê²Œ ì‘ë‹µí•©ë‹ˆë‹¤.

---

### 3. **Fly.io** (ê³ ê¸‰ ì‚¬ìš©ììš©)

**ì¥ì :**
- âœ… ë¬´ë£Œ í‹°ì–´ ì œê³µ
- âœ… PostgreSQL ì§€ì›
- âœ… ì „ ì„¸ê³„ CDN
- âœ… ë§¤ìš° ë¹ ë¦„

**ë‹¨ì :**
- âš ï¸ ì„¤ì •ì´ ë³µì¡í•¨
- âš ï¸ CLI ë„êµ¬ í•„ìš”

**ë¹„ìš©:**
- ì›¹ ì„œë¹„ìŠ¤: ë¬´ë£Œ (ì œí•œì )
- PostgreSQL: ë¬´ë£Œ (ì œí•œì )

---

## ğŸš€ Render.com ë°°í¬ ê°€ì´ë“œ (ì¶”ì²œ)

### 1ë‹¨ê³„: GitHubì— ì½”ë“œ ì—…ë¡œë“œ

```bash
# Git ì´ˆê¸°í™” (ì•„ì§ ì•ˆ í–ˆë‹¤ë©´)
git init
git add .
git commit -m "Initial commit"

# GitHubì— ìƒˆ ë ˆí¬ì§€í† ë¦¬ ìƒì„± í›„
git remote add origin https://github.com/your-username/MyPoly-LawData.git
git push -u origin main
```

### 2ë‹¨ê³„: Render.com ê°€ì… ë° ì„¤ì •

1. **Render.com ê°€ì…**: https://render.com
2. **New + â†’ PostgreSQL** í´ë¦­
   - Name: `mypoly-lawdata-db`
   - Database: `mypoly_lawdata`
   - User: `mypoly_user`
   - Region: `Singapore` (í•œêµ­ê³¼ ê°€ê¹Œì›€)
   - PostgreSQL Version: `16` (ë˜ëŠ” ìµœì‹ )
   - **Create Database** í´ë¦­

3. **Database ì •ë³´ í™•ì¸**
   - Internal Database URL ë³µì‚¬ (ë‚˜ì¤‘ì— ì‚¬ìš©)
   - External Database URL ë³µì‚¬ (ë¡œì»¬ì—ì„œ ì ‘ì†ìš©)

### 3ë‹¨ê³„: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

**Render Dashboard â†’ PostgreSQL â†’ Connect â†’ Environment Variables**ì—ì„œ:
- `PGPASSWORD`: ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸
- `PGHOST`: í˜¸ìŠ¤íŠ¸ ì£¼ì†Œ
- `PGPORT`: í¬íŠ¸ (ë³´í†µ 5432)
- `PGDATABASE`: ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„
- `PGUSER`: ì‚¬ìš©ì ì´ë¦„

### 4ë‹¨ê³„: ì›¹ ì„œë¹„ìŠ¤ ë°°í¬

1. **New + â†’ Web Service** í´ë¦­
2. **GitHub ë ˆí¬ì§€í† ë¦¬ ì—°ê²°**
3. **ì„¤ì •:**
   - Name: `mypoly-lawdata-app`
   - Environment: `Python 3`
   - Build Command: `pip install -r requirements.txt`
   - Start Command: `python app.py`
   - Plan: `Free`

4. **Environment Variables ì¶”ê°€:**
   ```
   DB_HOST=<PostgreSQL Internal Host>
   DB_PORT=5432
   DB_NAME=mypoly_lawdata
   DB_USER=mypoly_user
   DB_PASSWORD=<PostgreSQL Password>
   FLASK_ENV=production
   ```

5. **Create Web Service** í´ë¦­

### 5ë‹¨ê³„: app.py ìˆ˜ì • (í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©)

```python
import os

DB_CONFIG = {
    'host': os.environ.get('DB_HOST', 'localhost'),
    'database': os.environ.get('DB_NAME', 'mypoly_lawdata'),
    'user': os.environ.get('DB_USER', 'postgres'),
    'password': os.environ.get('DB_PASSWORD', 'maza_970816'),
    'port': int(os.environ.get('DB_PORT', 5432))
}
```

### 6ë‹¨ê³„: ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜

**ë¡œì»¬ì—ì„œ:**
```bash
# Render PostgreSQLì— ì—°ê²°
export PGHOST=<External Database Host>
export PGPORT=5432
export PGDATABASE=mypoly_lawdata
export PGUSER=mypoly_user
export PGPASSWORD=<Password>

# í…Œì´ë¸” ìƒì„±
psql -h <External Database Host> -U mypoly_user -d mypoly_lawdata -f scripts/db/create_tables_postgresql.sql

# ë°ì´í„° ìˆ˜ì§‘ (ì„ íƒì‚¬í•­)
python scripts/db/collect_22nd_members_complete.py
python scripts/db/collect_bills_from_date.py 20250801
python scripts/db/collect_votes_from_date.py 20251015
```

---

## ğŸš€ Railway.app ë°°í¬ ê°€ì´ë“œ (ëŒ€ì•ˆ)

### 1ë‹¨ê³„: Railway ê°€ì…

1. **Railway.app ê°€ì…**: https://railway.app
2. **GitHub ì—°ë™**

### 2ë‹¨ê³„: í”„ë¡œì íŠ¸ ìƒì„±

1. **New Project â†’ Deploy from GitHub repo**
2. **ë ˆí¬ì§€í† ë¦¬ ì„ íƒ**

### 3ë‹¨ê³„: PostgreSQL ì¶”ê°€

1. **New â†’ Database â†’ PostgreSQL**
2. **ìë™ìœ¼ë¡œ ìƒì„±ë¨**

### 4ë‹¨ê³„: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

RailwayëŠ” ìë™ìœ¼ë¡œ PostgreSQL ì—°ê²° ì •ë³´ë¥¼ í™˜ê²½ ë³€ìˆ˜ë¡œ ì œê³µ:
- `DATABASE_URL`: ìë™ ìƒì„±ë¨

**app.py ìˆ˜ì •:**
```python
import os
from urllib.parse import urlparse

# RailwayëŠ” DATABASE_URLì„ ì œê³µ
if 'DATABASE_URL' in os.environ:
    db_url = urlparse(os.environ['DATABASE_URL'])
    DB_CONFIG = {
        'host': db_url.hostname,
        'database': db_url.path[1:],  # / ì œê±°
        'user': db_url.username,
        'password': db_url.password,
        'port': db_url.port or 5432
    }
else:
    # ë¡œì»¬ ê°œë°œìš©
    DB_CONFIG = {
        'host': 'localhost',
        'database': 'mypoly_lawdata',
        'user': 'postgres',
        'password': 'maza_970816',
        'port': 5432
    }
```

### 5ë‹¨ê³„: ë°°í¬ ì„¤ì •

**railway.json** (í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— ìƒì„±):
```json
{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "startCommand": "python app.py",
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10
  }
}
```

---

## ğŸ“ ë°°í¬ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

### í•„ìˆ˜ ìˆ˜ì • ì‚¬í•­

1. **app.py í™˜ê²½ ë³€ìˆ˜ ì§€ì›**
   - âœ… ë¡œì»¬ê³¼ í”„ë¡œë•ì…˜ í™˜ê²½ êµ¬ë¶„
   - âœ… ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì •ë³´ë¥¼ í™˜ê²½ ë³€ìˆ˜ë¡œ ë°›ê¸°

2. **requirements.txt í™•ì¸**
   - âœ… ëª¨ë“  ì˜ì¡´ì„± í¬í•¨
   - âœ… ë²„ì „ ëª…ì‹œ

3. **ë³´ì•ˆ ì„¤ì •**
   - âœ… ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸ í•˜ë“œì½”ë”© ì œê±°
   - âœ… API í‚¤ í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬
   - âœ… `debug=False` (í”„ë¡œë•ì…˜)

4. **í¬íŠ¸ ì„¤ì •**
   - âœ… Render/RailwayëŠ” ìë™ìœ¼ë¡œ PORT í™˜ê²½ ë³€ìˆ˜ ì œê³µ
   - âœ… `app.run(host='0.0.0.0', port=int(os.environ.get('PORT', 5000)))`

---

## ğŸ”§ app.py ìˆ˜ì • ì˜ˆì‹œ

```python
import os
from flask import Flask, render_template, jsonify
import psycopg2
from psycopg2.extras import RealDictCursor

app = Flask(__name__)

# í™˜ê²½ ë³€ìˆ˜ì—ì„œ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì • ê°€ì ¸ì˜¤ê¸°
def get_db_config():
    # RailwayëŠ” DATABASE_URL ì œê³µ
    if 'DATABASE_URL' in os.environ:
        from urllib.parse import urlparse
        db_url = urlparse(os.environ['DATABASE_URL'])
        return {
            'host': db_url.hostname,
            'database': db_url.path[1:],
            'user': db_url.username,
            'password': db_url.password,
            'port': db_url.port or 5432
        }
    # RenderëŠ” ê°œë³„ í™˜ê²½ ë³€ìˆ˜ ì œê³µ
    elif 'DB_HOST' in os.environ:
        return {
            'host': os.environ.get('DB_HOST'),
            'database': os.environ.get('DB_NAME', 'mypoly_lawdata'),
            'user': os.environ.get('DB_USER', 'postgres'),
            'password': os.environ.get('DB_PASSWORD'),
            'port': int(os.environ.get('DB_PORT', 5432))
        }
    # ë¡œì»¬ ê°œë°œìš©
    else:
        return {
            'host': 'localhost',
            'database': 'mypoly_lawdata',
            'user': 'postgres',
            'password': 'maza_970816',
            'port': 5432
        }

def get_db_connection():
    """ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°"""
    return psycopg2.connect(**get_db_config())

# ... (ë‚˜ë¨¸ì§€ ì½”ë“œ)

if __name__ == '__main__':
    # í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œëŠ” PORT í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©
    port = int(os.environ.get('PORT', 5000))
    debug = os.environ.get('FLASK_ENV') != 'production'
    
    print("=" * 60)
    print("2025ë…„ ì˜ì•ˆ í‘œê²° ê²°ê³¼ ì›¹ ëŒ€ì‹œë³´ë“œ ì‹œì‘")
    print("=" * 60)
    print(f"ì„œë²„ ì£¼ì†Œ: http://0.0.0.0:{port}")
    print(f"ì˜ì•ˆ ëŒ€ì‹œë³´ë“œ: http://0.0.0.0:{port}")
    print(f"DB êµ¬ì¡° í˜ì´ì§€: http://0.0.0.0:{port}/db-structure")
    print(f"ERD í˜ì´ì§€: http://0.0.0.0:{port}/erd")
    print("=" * 60)
    
    app.run(debug=debug, host='0.0.0.0', port=port)
```

---

## ğŸ“Š ë¹„êµí‘œ

| í”Œë«í¼ | ë¬´ë£Œ í‹°ì–´ | PostgreSQL | ìŠ¬ë¦¬í”„ ëª¨ë“œ | ì„¤ì • ë‚œì´ë„ | ì¶”ì²œë„ |
|--------|----------|------------|------------|------------|--------|
| **Render.com** | âœ… | âœ… (90ì¼) | âš ï¸ ìˆìŒ | â­â­ ì‰¬ì›€ | â­â­â­â­â­ |
| **Railway.app** | âœ… ($5 í¬ë ˆë”§) | âœ… | âŒ ì—†ìŒ | â­â­â­ ë³´í†µ | â­â­â­â­ |
| **Fly.io** | âœ… | âœ… | âŒ ì—†ìŒ | â­â­â­â­ ì–´ë ¤ì›€ | â­â­â­ |

---

## ğŸ¯ ìµœì¢… ì¶”ì²œ

**Render.comì„ ì¶”ì²œí•©ë‹ˆë‹¤:**
1. ì„¤ì •ì´ ê°€ì¥ ê°„ë‹¨í•¨
2. PostgreSQL ë¬´ë£Œ ì œê³µ (90ì¼)
3. GitHub ì—°ë™ìœ¼ë¡œ ìë™ ë°°í¬
4. SSL ìë™ ì œê³µ (HTTPS)
5. í•œêµ­ì–´ ë¬¸ì„œëŠ” ì—†ì§€ë§Œ ì‚¬ìš©í•˜ê¸° ì‰¬ì›€

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

1. **Render.com ê°€ì… ë° PostgreSQL ìƒì„±**
2. **app.py ìˆ˜ì •** (í™˜ê²½ ë³€ìˆ˜ ì§€ì›)
3. **GitHubì— ì½”ë“œ ì—…ë¡œë“œ**
4. **Renderì—ì„œ ì›¹ ì„œë¹„ìŠ¤ ë°°í¬**
5. **ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜**
6. **íŒ€ì›ë“¤ì—ê²Œ URL ê³µìœ **

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **ë¬´ë£Œ í‹°ì–´ ì œí•œ:**
   - Render: 15ë¶„ê°„ ìš”ì²­ ì—†ìœ¼ë©´ ìŠ¬ë¦¬í”„ ëª¨ë“œ (ì²« ìš”ì²­ ì‹œ ëŠë¦¼)
   - Railway: ë¬´ë£Œ í¬ë ˆë”§ ì†Œì§„ ì‹œ ìœ ë£Œ ì „í™˜ í•„ìš”

2. **ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…:**
   - ì •ê¸°ì ìœ¼ë¡œ ë°ì´í„° ë°±ì—… ê¶Œì¥
   - Render/RailwayëŠ” ìë™ ë°±ì—… ì œê³µ (ìœ ë£Œ í”Œëœ)

3. **ë³´ì•ˆ:**
   - í™˜ê²½ ë³€ìˆ˜ì— ë¯¼ê°í•œ ì •ë³´ ì €ì¥
   - API í‚¤ëŠ” ì ˆëŒ€ ì½”ë“œì— í•˜ë“œì½”ë”©í•˜ì§€ ì•Šê¸°

---

**ì§ˆë¬¸ì´ë‚˜ ë¬¸ì œê°€ ìˆìœ¼ë©´ ì–¸ì œë“ ì§€ ë¬¼ì–´ë³´ì„¸ìš”!** ğŸš€

